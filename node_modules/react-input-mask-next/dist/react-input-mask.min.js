!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):(e=e||self).ReactInputMask=t(e.React,e.ReactDOM)}(this,(function(e,t){"use strict";var n="default"in e?e.default:e;function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var i=n[r],a=Object.getOwnPropertyDescriptor(t,i);a&&a.configurable&&void 0===e[i]&&Object.defineProperty(e,i,a)}}(e,t),e})(e,t)}function a(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function o(e){return requestAnimationFrame(e)}function l(e){cancelAnimationFrame(e)}function u(e){var t=e.ownerDocument;return t.hasFocus()&&t.activeElement===e}function s(e){return null==e?void 0:e.ownerDocument}function c(e){var t=function(e){var t;return null==(t=s(e))?void 0:t.defaultView}(e);return!!t&&e instanceof t.HTMLElement}function f(t){return e.useCallback((function(){var e=t.current,n="undefined"!=typeof window&&c(e);if(!e||!n)return null;if("INPUT"!==e.nodeName&&(e=e.querySelector("input")),!e)throw new Error("react-input-mask: inputComponent doesn't contain input node");return e}),[t])}function h(t,n){var r,i,a,s,c=e.useRef({start:null,end:null}),h=f(t),d=e.useCallback((function(){return function(e){var t=e.selectionStart,n=e.selectionEnd;return{start:t,end:n,length:n-t}}(h())}),[h]),g=e.useCallback((function(){return c.current}),[]),v=e.useCallback((function(e){var t=h();t&&u(t)&&(!function(e,t,n){void 0===n&&(n=t),e.setSelectionRange(t,n)}(t,e.start,e.end),c.current=d())}),[h,d]),p=e.useCallback((function(){c.current=d()}),[d]),m=(r=p,i=e.useRef(null),a=e.useCallback((function(){null===i.current&&function e(){r(),i.current=o(e)}()}),[r]),s=e.useCallback((function(){l(i.current),i.current=null}),[]),e.useEffect((function(){i.current&&(s(),a())}),[a,s]),e.useEffect(l,[]),[a,s]),P=m[0],k=m[1];return e.useLayoutEffect((function(){if(n){var e=h();return e.addEventListener("focus",P),e.addEventListener("blur",k),u(e)&&P(),function(){e.removeEventListener("focus",P),e.removeEventListener("blur",k),k()}}})),{getSelection:d,getLastSelection:g,setSelection:v}}function d(t,n){var r=e.useRef(),i=h(r,n),a=i.getSelection,o=i.getLastSelection,l=i.setSelection,u=function(t,n){var r=f(t),i=e.useRef(n);return{getValue:e.useCallback((function(){return r().value}),[r]),getLastValue:e.useCallback((function(){return i.current}),[]),setValue:e.useCallback((function(e){i.current=e;var t=r();t&&(t.value=e)}),[r])}}(r,t),s=u.getValue,c=u.getLastValue,d=u.setValue;return{inputRef:r,getInputState:function(){return{value:s(),selection:a()}},getLastInputState:function(){return{value:c(),selection:o()}},setInputState:function(e){var t=e.value,n=e.selection;d(t),l(n)}}}var g=function(e,t,n,r,i,a,o,l){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[n,r,i,a,o,l],c=0;(u=new Error(t.replace(/%s/g,(function(){return s[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}},v=["disabled","onBlur","onChange","onFocus","onMouseDown","readOnly","value"],p={9:/[0-9]/,a:/[A-Za-z]/,"*":/[A-Za-z0-9]/};var m=function(e){var t=this;this.isCharacterAllowedAtPosition=function(e,n){var r=t.maskOptions.maskPlaceholder;return!!t.isCharacterFillingPosition(e,n)||!!r&&r[n]===e},this.isCharacterFillingPosition=function(e,n){var r=t.maskOptions.mask;if(!e||n>=r.length)return!1;if(!t.isPositionEditable(n))return r[n]===e;var i=r[n];return new RegExp(i).test(e)},this.isPositionEditable=function(e){var n=t.maskOptions,r=n.mask,i=n.permanents;return e<r.length&&-1===i.indexOf(e)},this.isValueEmpty=function(e){return e.split("").every((function(e,n){return!t.isPositionEditable(n)||!t.isCharacterFillingPosition(e,n)}))},this.isValueFilled=function(e){return t.getFilledLength(e)===t.maskOptions.lastEditablePosition+1},this.getDefaultSelectionForValue=function(e){var n=t.getFilledLength(e),r=t.getRightEditablePosition(n);return{start:r,end:r}},this.getFilledLength=function(e){return function(e,t){for(var n=e.length-1;n>=0;n--){if(t(e[n],n))return n}return-1}(e.split(""),(function(e,n){return t.isPositionEditable(n)&&t.isCharacterFillingPosition(e,n)}))+1},this.getStringFillingLengthAtPosition=function(e,n){return e.split("").reduce((function(e,n){return t.insertCharacterAtPosition(e,n,e.length)}),function(e,t){void 0===t&&(t=1);for(var n="",r=0;r<t;r++)n+=e;return n}(" ",n)).length-n},this.getLeftEditablePosition=function(e){for(var n=e;n>=0;n--)if(t.isPositionEditable(n))return n;return null},this.getRightEditablePosition=function(e){for(var n=t.maskOptions.mask,r=e;r<n.length;r++)if(t.isPositionEditable(r))return r;return null},this.formatValue=function(e){var n=t.maskOptions,r=n.maskPlaceholder,i=n.mask;if(!r){for(e=t.insertStringAtPosition("",e,0);e.length<i.length&&!t.isPositionEditable(e.length);)e+=i[e.length];return e}return t.insertStringAtPosition(r,e,0)},this.clearRange=function(e,n,r){if(!r)return e;var i=n+r,a=t.maskOptions,o=a.maskPlaceholder,l=a.mask,u=e.split("").map((function(e,r){var a=t.isPositionEditable(r);return!o&&r>=i&&!a?"":r<n||r>=i?e:a?o?o[r]:"":l[r]})).join("");return t.formatValue(u)},this.insertCharacterAtPosition=function(e,n,r){var i=t.maskOptions,a=i.mask,o=i.maskPlaceholder;if(r>=a.length)return e;var l=t.isCharacterAllowedAtPosition(n,r),u=t.isPositionEditable(r),s=t.getRightEditablePosition(r),c=o&&s?n===o[s]:null,f=e.slice(0,r);!l&&u||(e=f+(l?n:a[r]));return l||u||c||(e=t.insertCharacterAtPosition(e,n,r+1)),e},this.insertStringAtPosition=function(e,n,r){var i=t.maskOptions,a=i.mask,o=i.maskPlaceholder;if(!n||r>=a.length)return e;var l=n.split(""),u=t.isValueFilled(e)||!!o,s=e.slice(r);if(e=l.reduce((function(e,n){return t.insertCharacterAtPosition(e,n,e.length)}),e.slice(0,r)),u)e+=s.slice(e.length-r);else if(t.isValueFilled(e))e+=a.slice(e.length).join("");else{e=s.split("").filter((function(e,n){return t.isPositionEditable(r+n)})).reduce((function(e,n){var r=t.getRightEditablePosition(e.length);return null===r?e:(t.isPositionEditable(e.length)||(e+=a.slice(e.length,r).join("")),t.insertCharacterAtPosition(e,n,e.length))}),e)}return e},this.processChange=function(e,n){var r=t.maskOptions,i=r.mask,a=r.prefix,o=r.lastEditablePosition,l=e.value,u=e.selection,s=n.value,c=n.selection,f=l,h="",d=0,g=0,v=Math.min(c.start,u.start);if(u.end>c.start?(h=f.slice(c.start,u.end),g=(d=t.getStringFillingLengthAtPosition(h,v))?c.length:0):f.length<s.length&&(g=s.length-f.length),f=s,g){if(1===g&&!c.length)v=c.start===u.start?t.getRightEditablePosition(u.start):t.getLeftEditablePosition(u.start);f=t.clearRange(f,v,g)}return f=t.insertStringAtPosition(f,h,v),(v+=d)>=i.length?v=i.length:v<a.length&&!d?v=a.length:v>=a.length&&v<o&&d&&(v=t.getRightEditablePosition(v)),{value:f=t.formatValue(f),enteredString:h,selection:{start:v,end:v}}},this.maskOptions=function(e){var t=e.mask,n=e.maskPlaceholder,r=[];if(!t)return{maskPlaceholder:null,mask:null,prefix:null,lastEditablePosition:null,permanents:[]};if("string"==typeof t){var i=!1,a="";t.split("").forEach((function(e){i||"\\"!==e?(!i&&p[e]||r.push(a.length),a+=e,i=!1):i=!0})),t=a.split("").map((function(e,t){return-1===r.indexOf(t)?p[e]:e}))}else t.forEach((function(e,t){"string"==typeof e&&r.push(t)}));n&&(n=1===n.length?t.map((function(e,t){return-1!==r.indexOf(t)?e:n})):n.split(""),r.forEach((function(e){n[e]=t[e]})),n=n.join(""));for(var o=r.filter((function(e,t){return e===t})).map((function(e){return t[e]})).join(""),l=t.length-1;-1!==r.indexOf(l);)l--;return{maskPlaceholder:n,prefix:o,mask:t,lastEditablePosition:l,permanents:r}}(e)},P=["children"],k=function(e){var t,r;function o(){return e.apply(this,arguments)||this}return r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,i(t,r),o.prototype.render=function(){var e=this.props,t=e.children,r=a(e,P);return n.cloneElement(t,r)},o}(n.Component),b=["alwaysShowMask","children","mask","maskPlaceholder","beforeMaskedStateChange"],E=e.forwardRef((function(i,l){var c=i.alwaysShowMask,h=i.children,p=i.mask,P=i.maskPlaceholder,E=i.beforeMaskedStateChange,S=a(i,b);!function(e){var t=e.mask,n=e.maskPlaceholder;t&&n&&1!==n.length&&n.length!==t.length&&g(!1)}(i);var C,y,w=new m({mask:p,maskPlaceholder:P}),O=!!p,V=!S.disabled&&!S.readOnly,F=null!==i.value&&void 0!==i.value,L=(C=O,y=e.useRef(),e.useEffect((function(){y.current=C})),y.current),R=d(function(e){return""+e}((F?i.value:i.defaultValue)||""),O),A=R.inputRef,M=R.getInputState,x=R.setInputState,D=R.getLastInputState,j=f(A);if(O&&F){var I=j(),T=I&&u(I)||c||i.value?w.formatValue(i.value):i.value;E&&(T=E({nextState:{value:T,selection:{start:null,end:null}}}).value),x(r({},D(),{value:T}))}var q=D(),B=q.selection,N=q.value;e.useLayoutEffect((function(){if(O){var e=u(j()),t=B,n=M(),i=r({},n);if(!F){var a=n.value,o=w.formatValue(a),l=w.isValueEmpty(o);!l||e||c?i.value=o:l&&!e&&(i.value="")}e&&!L?i.selection=w.getDefaultSelectionForValue(i.value):F&&e&&t&&null!==t.start&&null!==t.end&&(i.selection=t),E&&(i=E({currentState:n,nextState:i})),x(i)}}));var z=r({},S,{onFocus:function(e){A.current=e.target;var t=M().value;if(O&&!w.isValueFilled(t)){var n=w.formatValue(t),r=w.getDefaultSelectionForValue(n),a={value:n,selection:r};E&&(n=(a=E({currentState:M(),nextState:a})).value,r=a.selection),x(a),n!==t&&i.onChange&&i.onChange(e),o((function(){x(D())}))}i.onFocus&&i.onFocus(e)},onBlur:function(e){var t=M().value,n=D().value;if(O&&!c&&w.isValueEmpty(n)){var r="",a={value:r,selection:{start:null,end:null}};E&&(r=(a=E({currentState:M(),nextState:a})).value),x(a),r!==t&&i.onChange&&i.onChange(e)}i.onBlur&&i.onBlur(e)},onChange:O&&V?function(e){var t=M(),n=D(),r=w.processChange(t,n);E&&(r=E({currentState:t,previousState:n,nextState:r})),x(r),i.onChange&&i.onChange(e)}:i.onChange,onMouseDown:O&&V?function(e){var t=j(),n=M().value,a=s(t);if(!u(t)&&!w.isValueFilled(n)){var o=e.clientX,l=e.clientY,c=(new Date).getTime();a.addEventListener("mouseup",(function e(n){if(a.removeEventListener("mouseup",e),u(t)){var i=Math.abs(n.clientX-o),s=Math.abs(n.clientY-l),f=Math.max(i,s),h=(new Date).getTime()-c;if(f<=10&&h<=200||f<=5&&h<=300){var d=D(),g=r({},d,{selection:w.getDefaultSelectionForValue(d.value)});x(g)}}}))}i.onMouseDown&&i.onMouseDown(e)}:i.onMouseDown,ref:function(e){A.current=t.findDOMNode(e),!function(e){return"function"==typeof e}(l)?null!==l&&"object"==typeof l&&(l.current=e):l(e)},value:O&&F?N:i.value});return h?(function(e,t){v.filter((function(n){return null!=t.props[n]&&t.props[n]!==e[n]})).length&&g(!1)}(i,h),n.createElement(k,z,h)):n.createElement("input",z)}));return E.defaultProps={alwaysShowMask:!1,maskPlaceholder:"_"},E}));
